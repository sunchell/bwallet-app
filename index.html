<!DOCTYPE html>
<html>
	<head>
		<title>Avagen</title>
		<script src="https://telegram.org/js/telegram-web-app.js"></script>
		<style>
			#canvas {
				width: 200px;
				height: 200px;
				border: 1px solid black;
				left: 0;
				right: 0;
				margin: auto;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" width="200px" height="200px"></canvas>
		
		<script>
			const c = document.querySelector('#canvas');
			const ctx = c.getContext('2d');
			
			const gradient = ctx.createRadialGradient(100, 100, 50, 100, 100, 100);
				gradient.addColorStop(0, 'red');
				gradient.addColorStop(1, 'blue');
			
			ctx.fillStyle = gradient;
			ctx.fillRect(0, 0, 200, 200);
			
			//Telegram Web App
			
			let tg = window.Telegram.WebApp;
			
			tg.MainButton.text = 'Рендер'; 
			tg.MainButton.show()
			
			let btn_status;
			let output;
			
			Telegram.WebApp.onEvent('mainButtonClicked', () => {
				if(btn_status !== 'to_save') {
					output = c.toDataURL
					
					tg.MainButton.color = '#31B545';
					tg.MainButton.setText('Зберегти');
				} else {
					tg.sendData({ output })
				}
			});
		</script>
	</body>
</html>
